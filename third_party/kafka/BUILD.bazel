load("@rules_foreign_cc//tools/build_defs:cmake.bzl", "cmake_external")

cmake_external(
    name = "librdkafka",
    cache_entries = {
        "RDKAFKA_BUILD_STATIC": "ON",
        "WITH_ZSTD": "OFF",
        "WITH_SSL": "OFF",
        "WITH_SASL": "OFF",
        "ENABLE_LZ4_EXT": "OFF",
        "WITH_LIBDL": "OFF",
        "WITH_ZLIB": "OFF",
    },
    lib_source = "@librdkafka//:all",
    static_libraries = [
        "librdkafka++.a",
        "librdkafka.a",
    ],
    tags = ["no-remote-exec"],
    visibility = ["//visibility:public"],
)
